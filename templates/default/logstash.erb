###############################
# Default settings for logstash
###############################

# Override Java location
#JAVACMD=/usr/bin/java

# Set a home directory
LS_HOME="<%= node['logstash'][@type]['home'] %>"

# logstash logging
LS_LOG_FILE="<%= node['logstash'][@type]['log_file'] %>"
#LS_USE_GC_LOGGING="true"

# Arguments to pass to logstash agent
LS_OPTS="agent -f <%= node['logstash']['server']['config_dir'] %>"
<% if node['logstash'][@type]['pluginpath'] -%>
LS_OPTS="$LS_OPTS --pluginpath <%= node['logstash'][@type]['pluginpath'] %>"
<% end -%>
<% if node['logstash'][@type]['workers'] %>
LS_OPTS="$LS_OPTS -w <%= node['logstash'][@type]['workers'] %>"
<% end %>
<% if node['logstash'][@type]['log_file'] -%>
export LS_OPTS="$LS_OPTS -l $LS_LOG_FILE"
<% end -%>
<% if node['logstash'][@type]['debug'] -%>
export LS_OPTS="$LS_OPTS -vv"
<% end -%>

# Arguments to pass to java
#LS_HEAP_SIZE="500m"
LS_JAVA_OPTS="-server -Xms<%= node['logstash'][@type]['xms'] %> -Xmx<%= node['logstash'][@type]['xmx'] %> -Djava.io.tmpdir=$LS_HOME/tmp/ <%= node['logstash'][@type]['java_opts'] %> <%= '-Djava.net.preferIPv4Stack=true' if node['logstash']['agent']['ipv4_only'] %>"
LS_GC_OPTS="<%= node['logstash'][@type]['gc_opts'] %>"

#Final java opts
LS_JAVA_OPTS = "$LS_JAVA_OPTS $LS_GC_OPTS"

# pidfiles aren't used for upstart; this is for sysv users.
#LS_PIDFILE=/var/run/logstash.pid

# user id to be invoked as; for upstart: edit /etc/init/logstash.conf
LS_USER="<%= node['logstash']['user'] %>"

# logstash configuration directory
LS_CONF_DIR="$LS_HOME/<%= node['logstash'][@type]['config_dir'] %>"

# Open file limit; cannot be overridden in upstart
#LS_OPEN_FILES=16384

# Nice level
#LS_NICE=19
